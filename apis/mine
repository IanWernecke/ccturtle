#!/bin/lua


-- mine all blocks that match the given block id
function vein(block)

    -- throw an error if the block name is not passed
    if block == nil then
        error("Block is nil.")
    end

    local count = 0

    -- loop and look in all four directions
    for i=1,4 do
        if turtle.detect() and match.forward(block) then
            dig.forward()
            count = count + exact(block) + 1
            turtle.back()
        end
        turtle.turnLeft()
    end

    -- up
    if turtle.detectUp() and match.up(block) then
        dig.up()
        count = count + exact(block) + 1
        turtle.down()
    end
   
    -- down
    if turtle.detectDown() and match.down(block) then
        dig.down()
        count = count + exact(block) + 1
        turtle.up()
    end 

    return count

end


